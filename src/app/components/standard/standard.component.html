<mat-card class="mat-elevation-z8">
  <h3 class=" text-center">
    Нақшаи таълим
  </h3>
  <table id="standard-info">
    <tr>
      <td>барои ихтисоси</td>
      <td>{{Standard.specialty}}</td>
    </tr>
    <tr>
      <td>Дараҷаи таҳсилот:</td>
      <td>{{Standard.degreeOfStudying}}</td>
    </tr>
    <tr>
      <td>Касб:</td>
      <td>{{Standard.profession}}</td>
    </tr>
    <tr>
      <td>Мӯҳлати таҳсил:</td>
      <td>{{Standard.timeOfStudying}}</td>
    </tr>
    <tr>
      <td>Шакли таҳсил:</td>
      <td>{{Standard.typeOfStudying}}</td>
    </tr>
    <tr>
      <td>Санаи қабул:</td>
      <td>
        {{Standard.dateOfAcceptance | date:'dd'}}-{{Standard.dateOfAcceptance | date:'MM'}}-{{Standard.dateOfAcceptance | date:'yyyy'}}
      </td>
    </tr>
  </table>
</mat-card>

<div class="bg-black">
  <table>
    <tr>
      <th rowspan="3">№</th>
      <th rowspan="3">
        <h4>Номгӯи фанҳо</h4>
      </th>
      <th rowspan="3">Ҳаҷми кредитҳо</th>
      <th rowspan="2" colspan="2">Шаклҳои назорат аз рӯи семестрҳо</th>
      <th colspan="3">Ба омӯзгор</th>
      <th rowspan="3">КМД</th>
      <th colspan="10">Тақсимоти кредитҳо ба курсҳо ва семестрҳо</th>
    </tr>
    <tr>
      <th rowspan="2">Ҳамагӣ</th>
      <th colspan="2">Аз ҷумла</th>
      <th colspan="2">Курси 1</th>
      <th colspan="2">Курси 2</th>
      <th colspan="2">Курси 3</th>
      <th colspan="2">Курси 4</th>
      <th colspan="2">Курси 5</th>
    </tr>
    <tr>
      <th>Имтиҳон</th>
      <th>Ҳимояи КМД</th>
      <th>Аудиторӣ</th>
      <th>КМРО</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
    </tr>
    <tr bgcolor="#eee">
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>7</th>
      <th>8</th>
      <th>9</th>
      <th>10</th>
      <th>11</th>
      <th>12</th>
      <th>13</th>
      <th>14</th>
      <th>15</th>
      <th>16</th>
      <th>17</th>
      <th>18</th>
      <th>19</th>
    </tr>
    <ng-template ngFor let-j="index" let-type [ngForOf]="subjectTypes">
      <tr class="bg-eee" [class.hovered]="type.showConfigIcons && (Standard.locked === 0)">
        <td colspan="2">{{romanize(j + 1) + "." + type.name}}</td>
        <td>{{ sum(type.id, 'credits') }}</td>
        <td></td>
        <td></td>
        <td>{{ sum(type.id, 'total') }}</td>
        <td>{{ sum(type.id, 'audit') }}</td>
        <td>{{ sum(type.id, 'kmro') }}</td>
        <td>{{ sum(type.id, 'iws') }}</td>
        <td>
          <span *ngIf="sumTerms(type.id, 1) !== 0">
            {{ sumTerms(type.id, 1) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 2) !== 0">
            {{ sumTerms(type.id, 2) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 3) !== 0">
            {{ sumTerms(type.id, 3) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 4) !== 0">
            {{ sumTerms(type.id, 4) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 5) !== 0">
            {{ sumTerms(type.id, 5) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 6) !== 0">
            {{ sumTerms(type.id, 6) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 7) !== 0">
            {{ sumTerms(type.id, 7) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 8) !== 0">
            {{ sumTerms(type.id, 8) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 9) !== 0">
            {{ sumTerms(type.id, 9) }}
          </span>
        </td>
        <td>
          <span *ngIf="sumTerms(type.id, 10) !== 0">
            {{ sumTerms(type.id, 10) }}
          </span>
        </td>
      </tr>
      <div *ngIf="Standard.locked === 0" (click)="addSubject(type.id);" class="settings" (mouseover)="type.showConfigIcons = true" (mouseleave)="type.showConfigIcons = false">
        <mat-icon class="md-18">add_circle_outline</mat-icon>
        Барои илова намудани фанн дар бахши мазкур ба руяш пахш намоед
        <mat-icon class="md-18">add_circle_outline</mat-icon>
      </div>
      <ng-template ngFor let-i="index" let-subject [ngForOf]="getSubjectsById(type.id)">
        <tr class="showConfig" [class.hovered]="subject.showConfigIcons && (Standard.locked === 0)" *ngIf="subject.idType === type.id" >
          <td>{{ i + 1 }}</td>
          <td>
            {{ subject.name }}
            <ng-template [ngIf]="subject.selective === 1">
              (ф. интихобӣ)
            </ng-template>
          </td>
          <td>{{ subject.credits }}</td>
          <td>{{ subject.typeOfMonitoring.exam }}</td>
          <td>{{ subject.typeOfMonitoring.goUpIWS }}</td>
          <td>{{ subject.toTeacher.total }}</td>
          <td>{{ subject.toTeacher.including.audit }}</td>
          <td>{{ subject.toTeacher.including.kmro }}</td>
          <td>{{ subject.IWS }}</td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 1">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 2">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 3">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 4">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 5">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 6">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 7">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 8">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 9">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
          <td>
            <ng-template ngFor let-i="index" let-term [ngForOf]="subject.creditDividing.terms">
              <span *ngIf="term === 10">
                {{ subject.creditDividing.credits[i] }}
              </span>
            </ng-template>
          </td>
        </tr>
        <div *ngIf="Standard.locked === 0" class="settings " (mouseover)="subject.showConfigIcons = true" (mouseleave)="subject.showConfigIcons = false">
          <div (click)="editSubject(subject, i)">
            <mat-icon class="md-18">edit</mat-icon>
          </div>
          <div (click)="deleteSubject(subject, i)">
            <mat-icon class="md-18">delete</mat-icon>
          </div>
        </div>
      </ng-template>
    </ng-template>
  </table>
</div>
